{"version":3,"sources":["../../../src/controllers/Bin/binDeleteItemsController.ts","../../../src/prisma/index.ts","../../../src/services/Bin/binDeleteItemsService.ts"],"sourcesContent":["import { Request, Response } from \"express\";\r\nimport { BinDeleteItemsService } from \"../../services/Bin/binDeleteItemsService\";\r\n\r\nclass BinDeleteItemsController {\r\n  async handle(req: Request, res: Response) {\r\n     \r\n    const { \r\n        id,\r\n    } = req.params;\r\n\r\n    const binDeleteItemsService= new BinDeleteItemsService();\r\n\r\n    const responseBinGetAllItemsService = await binDeleteItemsService.execute({\r\n          id: id,\r\n    });\r\n\r\n    return res\r\n      .status(responseBinGetAllItemsService.data.status)\r\n      .json(responseBinGetAllItemsService.data);\r\n  }\r\n}\r\n\r\nexport { BinDeleteItemsController };\r\n","import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst prismaClient = new PrismaClient()\r\n\r\nexport default prismaClient;\r\n","import { MessagesError } from \"../../constants/messages.api\";\r\nimport prismaClient from \"../../prisma\";\r\n\r\ninterface IBinDeleteItemsService {\r\n  id?: string | null;\r\n  idUserOwner?: string | null;\r\n}\r\n\r\nclass BinDeleteItemsService {\r\n  async execute({ id }: IBinDeleteItemsService) {\r\n    if (!id) {\r\n      return {\r\n        data: {\r\n          message: \"Informe o ID do item na lixeira\",\r\n          status: 400,\r\n        }\r\n      };\r\n    }\r\n\r\n    const itemBinExists = await prismaClient.bin.findUnique({\r\n      where: {\r\n        id: id, \r\n      },\r\n    });\r\n\r\n    if (!itemBinExists) {\r\n      return {\r\n        message:\r\n          \"Não foi possível prosseguir com a ação, item não encontrado na lixeira\",\r\n        status: 404,\r\n      };\r\n    }\r\n\r\n    try {\r\n      await prismaClient.bin.delete({\r\n        where: { id },\r\n      });\r\n\r\n      return {\r\n        message: \"Item deletado permanentemente com sucesso\",\r\n        status: 200,\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        message: `${MessagesError.DeleteMessageError} ${err}`,\r\n        status: 500,\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport { BinDeleteItemsService };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,oBAA6B;AAE7B,IAAM,eAAe,IAAI,2BAAa;AAEtC,IAAO,iBAAQ;;;ACIf,IAAM,wBAAN,MAA4B;AAAA,EACpB,QAAQ,IAAgC;AAAA,+CAAhC,EAAE,GAAG,GAA2B;AAC5C,UAAI,CAAC,IAAI;AACP,eAAO;AAAA,UACL,MAAM;AAAA,YACJ,SAAS;AAAA,YACT,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAEA,YAAM,gBAAgB,MAAM,eAAa,IAAI,WAAW;AAAA,QACtD,OAAO;AAAA,UACL;AAAA,QACF;AAAA,MACF,CAAC;AAED,UAAI,CAAC,eAAe;AAClB,eAAO;AAAA,UACL,SACE;AAAA,UACF,QAAQ;AAAA,QACV;AAAA,MACF;AAEA,UAAI;AACF,cAAM,eAAa,IAAI,OAAO;AAAA,UAC5B,OAAO,EAAE,GAAG;AAAA,QACd,CAAC;AAED,eAAO;AAAA,UACL,SAAS;AAAA,UACT,QAAQ;AAAA,QACV;AAAA,MACF,SAAS,KAAK;AACZ,eAAO;AAAA,UACL,SAAS,oEAAmC,IAAI,GAAG;AAAA,UACnD,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA;AACF;;;AF9CA,IAAM,2BAAN,MAA+B;AAAA,EACvB,OAAO,KAAc,KAAe;AAAA;AAExC,YAAM;AAAA,QACF;AAAA,MACJ,IAAI,IAAI;AAER,YAAM,wBAAuB,IAAI,sBAAsB;AAEvD,YAAM,gCAAgC,MAAM,sBAAsB,QAAQ;AAAA,QACpE;AAAA,MACN,CAAC;AAED,aAAO,IACJ,OAAO,8BAA8B,KAAK,MAAM,EAChD,KAAK,8BAA8B,IAAI;AAAA,IAC5C;AAAA;AACF;","names":[]}