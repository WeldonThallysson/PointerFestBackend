{"version":3,"sources":["../../../src/controllers/Bin/binGetDetailsItemsController.ts","../../../src/prisma/index.ts","../../../src/services/Bin/binGetDetailsItemsService.ts"],"sourcesContent":["import {Request, Response} from 'express'\r\nimport { BinGetDetailsItemsService } from '../../services/Bin/binGetDetailsItemsService'\r\n\r\n\r\n\r\nclass BinGetDetailsItemsController {\r\n    async handle(req: Request, res: Response){\r\n        const id = req.query.id as string;\r\n        const idUserOwner = req.query.idUserOwner as string\r\n\r\n        const binGetDetailsItems = new BinGetDetailsItemsService()\r\n\r\n        const responseBinGetDetailsItems = await binGetDetailsItems.execute({\r\n            id: id,\r\n            idUserOwner: idUserOwner\r\n        })\r\n\r\n        return res.status(responseBinGetDetailsItems.data.status).json(responseBinGetDetailsItems.data)\r\n \r\n    }\r\n}\r\n\r\nexport {BinGetDetailsItemsController}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { PrismaClient } from \"@prisma/client\";\r\n\r\nconst prismaClient = new PrismaClient()\r\n\r\nexport default prismaClient;\r\n","import { MessagesError } from \"../../constants/messages.api\";\r\nimport prismaClient from \"../../prisma\";\r\n\r\ninterface IBinGetDetailsItemsService {\r\n  id: string;\r\n  idUserOwner?: string | null;\r\n}\r\n\r\nclass BinGetDetailsItemsService {\r\n  async execute({ id, idUserOwner }: IBinGetDetailsItemsService) {\r\n    const where: any = null;\r\n\r\n    if (id) where.id = { contains: id, mode: \"insensitive\" };\r\n    if (idUserOwner) where.idUserOwner = { contains: idUserOwner, mode: \"insensitive\" };\r\n\r\n    const userExists = await prismaClient.users.findFirst({\r\n      where: {\r\n        id: idUserOwner,\r\n      },\r\n    });\r\n    \r\n    const binExists = await prismaClient.bin.findFirst({\r\n      where,\r\n    });\r\n\r\n    if (!userExists) {\r\n      return {\r\n        data: {\r\n          message:\r\n            \"Não foi possível realizar essa ação, esse usuário responsável pelo item não existe!\",\r\n          status: 404,\r\n        },\r\n      };\r\n    }\r\n\r\n    if (!binExists) {\r\n      return {\r\n        data: {\r\n          message:\r\n            \"Não foi possível realizar essa ação, o item não existe na lixeira!\",\r\n          status: 404,\r\n        },\r\n      };\r\n    }\r\n\r\n    try {\r\n      return {\r\n        data: {\r\n          items: binExists,\r\n          status: 200,\r\n        },\r\n      };\r\n    } catch (err) {\r\n      return {\r\n        data: {\r\n          message: `${MessagesError.GetDetailsMessageError} ${err}`,\r\n          status: 500,\r\n        },\r\n      };\r\n    }\r\n  }\r\n}\r\n\r\nexport { BinGetDetailsItemsService };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,oBAA6B;AAE7B,IAAM,eAAe,IAAI,2BAAa;AAEtC,IAAO,iBAAQ;;;ACIf,IAAM,4BAAN,MAAgC;AAAA,EACxB,QAAQ,IAAiD;AAAA,+CAAjD,EAAE,IAAI,YAAY,GAA+B;AAC7D,YAAM,QAAa;AAEnB,UAAI,GAAI,OAAM,KAAK,EAAE,UAAU,IAAI,MAAM,cAAc;AACvD,UAAI,YAAa,OAAM,cAAc,EAAE,UAAU,aAAa,MAAM,cAAc;AAElF,YAAM,aAAa,MAAM,eAAa,MAAM,UAAU;AAAA,QACpD,OAAO;AAAA,UACL,IAAI;AAAA,QACN;AAAA,MACF,CAAC;AAED,YAAM,YAAY,MAAM,eAAa,IAAI,UAAU;AAAA,QACjD;AAAA,MACF,CAAC;AAED,UAAI,CAAC,YAAY;AACf,eAAO;AAAA,UACL,MAAM;AAAA,YACJ,SACE;AAAA,YACF,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAEA,UAAI,CAAC,WAAW;AACd,eAAO;AAAA,UACL,MAAM;AAAA,YACJ,SACE;AAAA,YACF,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAEA,UAAI;AACF,eAAO;AAAA,UACL,MAAM;AAAA,YACJ,OAAO;AAAA,YACP,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF,SAAS,KAAK;AACZ,eAAO;AAAA,UACL,MAAM;AAAA,YACJ,SAAS,oFAAuC,IAAI,GAAG;AAAA,YACvD,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA;AACF;;;AFxDA,IAAM,+BAAN,MAAmC;AAAA,EACzB,OAAO,KAAc,KAAc;AAAA;AACrC,YAAM,KAAK,IAAI,MAAM;AACrB,YAAM,cAAc,IAAI,MAAM;AAE9B,YAAM,qBAAqB,IAAI,0BAA0B;AAEzD,YAAM,6BAA6B,MAAM,mBAAmB,QAAQ;AAAA,QAChE;AAAA,QACA;AAAA,MACJ,CAAC;AAED,aAAO,IAAI,OAAO,2BAA2B,KAAK,MAAM,EAAE,KAAK,2BAA2B,IAAI;AAAA,IAElG;AAAA;AACJ;","names":[]}